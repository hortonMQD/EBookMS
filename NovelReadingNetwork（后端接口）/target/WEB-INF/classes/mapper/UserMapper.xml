<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//com.mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- 将namespace的值设置为DAO类对应的路径 -->
<mapper namespace="com.dao.UserDao">

    <!--使用自定义结果集类型-->
    <resultMap id="UserList" type="com.pojo.User">
        <id property="id" column="id" />
        <result property="username" column="username"/>
        <result property="loginname" column="loginname"/>
        <result property="password" column="password" />
        <result property="status" column="status"/>
        <result property="create_date" column="createdate"/>
    </resultMap>


    <select id="SelectUser" resultMap="UserList" parameterType="com.pojo.User">
        SELECT id,username,loginname,password,status,createdate FROM user_inf
        <where>
            <if test="id != null and id != ''">
                and id = #{id}
            </if>
            <if test="username != null and username != ''">
                and username like concat('%',#{username},'%')
            </if>
            <if test="loginname != null and loginname != ''">
                and loginname = #{loginname}
            </if>
            <if test="password != null and password != ''" >
                and password = #{password}
            </if>
            <if test="status != null and status != ''" >
                and status = #{status}
            </if>
            <if test="create_date != null and create_date != ''" >
                and createdate = #{create_date}
            </if>
        </where>
    </select>


    <update id="UpdateUser" parameterType="com.pojo.User">
        update user_inf
        <set>
            <if test="username != null and username != ''">username = #{username},</if>
            <if test="loginname != null and loginname != ''">loginname = #{loginname}</if>
            <if test="password != null and password != ''" >password = #{password}</if>
            <if test="status != null and status != ''" >status = #{status}</if>
        </set>
        where id = #{id};
    </update>


    <insert id="InsertUser" parameterType="com.pojo.User" useGeneratedKeys="true" keyProperty="id">
        insert into user_inf (username,loginname,password,status,createdate) values(#{username},#{loginname},#{password},'0',NOW());
    </insert>

    <delete id="DeleteUser"  parameterType="com.pojo.User">
        delete from user_inf where id = #{id};
    </delete>



</mapper>